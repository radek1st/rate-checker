<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

	<script>
        async function httpGet(theUrl){
            const proxyurl = "https://cors-anywhere.herokuapp.com/";
            const url = theUrl; // site that doesnâ€™t send Access-Control-*
            const y = await fetch(proxyurl + url);
            const x = await y.text();
            return JSON.parse(x);
        }

        async function calculateRate(){
            const [gzeEth, ethAud] = await Promise.all([
                httpGet('https://api.qryptos.com/products/97'), 
                httpGet('https://api.independentreserve.com/Public/GetMarketSummary?primaryCurrencyCode=eth&secondaryCurrencyCode=aud')
            ]);
            const rate = ethAud.DayAvgPrice * gzeEth.last_price_24h;

            document.getElementById("gzeEth").innerHTML = gzeEth.last_price_24h;
            document.getElementById("ethAud").innerHTML = ethAud.DayAvgPrice;
            document.getElementById("gzeAud").innerHTML = rate;
        }
</script>
</head>

<body onload="calculateRate()">
	<h1>Simple rate fetching script for GZE.</h1>

    GZE to ETH rate:<div id="gzeEth"></div>
    <br>
    ETH to AUD rate:<div id="ethAud"></div>
    <br>
    GZE to AUD rate:<div id="gzeAud"></div>    
    <br>
	<button type="button" onclick="calculateRate()">Update</button>

    <h3>How it works</h3>
    It simply fetches average prices from Qryptos and IndependentReserves using their APIs. Check sourcecode of this file for exact calls.

</body>
</html>
